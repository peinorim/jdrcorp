$(document).ready(function() {
    // Smart Wizard 	
    $('#wizard').smartWizard({transitionEffect: 'slideleft', onLeaveStep: leaveAStepCallback, onFinish: onFinishCallback, enableFinishButton: true});

    function leaveAStepCallback(obj) {
        var step_num = obj.attr('rel');
        return validateSteps(step_num);
    }
    function onFinishCallback() {
        if (validateAllSteps()) {
            $('#wizard').smartWizard('showMessage', 'Finish Clicked');
        }
    }
    function validateAllSteps() {
        var isStepValid = true;

        if (validateStep1() === false) {
            isStepValid = false;
            $('#wizard').smartWizard('setError', {stepnum: 1, iserror: true});
        } else {
            $('#wizard').smartWizard('setError', {stepnum: 1, iserror: false});
        }
        return isStepValid;
    }


    function validateSteps(step) {
        var isStepValid = true;
        // validate step 1
        if (step === 1) {
            if (validateStep1() === false) {
                isStepValid = false;
                $('#wizard').smartWizard('showMessage', 'Please correct the errors in step' + step + ' and click next.');
                $('#wizard').smartWizard('setError', {stepnum: step, iserror: true});
            } else {
                $('#wizard').smartWizard('setError', {stepnum: step, iserror: false});
            }
        }
        return isStepValid;
    }

    function validateStep1() {
        var isValid = true;
        // Validate Username
        var force = $('#force').val();
        if (!force && force.length <= 0) {
            isValid = false;
            $('#msg_username').html('Please fill username').show();
        } else {
            $('#msg_username').html('').hide();
        }
        return isValid;
    }
});